<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solvo Global - Supervisor Compensation Calculator (Unofficial)</title>
    <link href="https://fonts.googleapis.com/css2?family=S√∂hne:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Solvo Brand Colors */
            --solvo-primary: #F09F54;
            --solvo-primary-dark: #E08A39;
            --solvo-secondary: #2c5aa0;
            
            /* OpenAI-inspired Neutral Palette (Dark Mode Default) */
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --bg-elevated: #30363d;
            --bg-overlay: #161b22;
            
            /* Text Colors */
            --text-primary: #f0f6fc;
            --text-secondary: #8b949e;
            --text-muted: #656d76;
            --text-inverse: #24292f;
            
            /* Border Colors */
            --border-default: #30363d;
            --border-muted: #21262d;
            --border-subtle: #262c36;
            
            /* Semantic Colors */
            --success: #238636;
            --danger: #da3633;
            --warning: #9e6a03;
            
            /* Interactive */
            --btn-primary: var(--solvo-primary);
            --btn-primary-hover: var(--solvo-primary-dark);
            --input-bg: var(--bg-tertiary);
            --input-border: var(--border-default);
            --input-focus: var(--solvo-primary);
            
            /* Light Mode Overrides */
            --bg-primary-light: #ffffff;
            --bg-secondary-light: #f6f8fa;
            --bg-tertiary-light: #ffffff;
            --bg-elevated-light: #f6f8fa;
            --text-primary-light: #24292f;
            --text-secondary-light: #57606a;
            --text-muted-light: #6e7781;
            --border-default-light: #d0d7de;
            --border-muted-light: #d0d7de;
            --border-subtle-light: #e1e5e9;
            --input-bg-light: #ffffff;
            --input-border-light: #d0d7de;
            --input-focus-light: var(--solvo-primary);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.2);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.25);
            
            /* Glassmorphism */
            --glass-bg: rgba(33, 38, 45, 0.8);
            --glass-border: rgba(48, 54, 61, 0.6);
            --glass-bg-light: rgba(255, 255, 255, 0.8);
            --glass-border-light: rgba(208, 215, 222, 0.6);
        }

        [data-theme="light"] {
            --bg-primary: var(--bg-primary-light);
            --bg-secondary: var(--bg-secondary-light);
            --bg-tertiary: var(--bg-tertiary-light);
            --bg-elevated: var(--bg-elevated-light);
            --bg-overlay: var(--bg-secondary-light);
            --text-primary: var(--text-primary-light);
            --text-secondary: var(--text-secondary-light);
            --text-muted: var(--text-muted-light);
            --border-default: var(--border-default-light);
            --border-muted: var(--border-muted-light);
            --border-subtle: var(--border-subtle-light);
            --input-bg: var(--input-bg-light);
            --input-border: var(--input-border-light);
            --input-focus: var(--input-focus-light);
            --glass-bg: var(--glass-bg-light);
            --glass-border: var(--glass-border-light);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Disclaimer Banner */
        .disclaimer-banner {
            background: rgba(218, 54, 51, 0.1);
            border: 1px solid rgba(218, 54, 51, 0.3);
            color: var(--danger);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem auto 2rem;
            text-align: center;
            font-weight: 500;
            max-width: 1200px;
            transition: background-color 0.3s ease;
        }

        .disclaimer-banner.light {
            background: rgba(218, 54, 51, 0.05);
            border-color: rgba(218, 54, 51, 0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .theme-toggle.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        /* Quick Actions Sidebar */
        .quick-actions {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 1000;
        }

        .quick-action-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .quick-action-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .quick-action-btn.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        /* Header Styling */
        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 2rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            border: 1px solid var(--border-default);
            position: relative;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        .header.light {
            background: var(--bg-secondary-light);
            border-color: var(--border-default-light);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(240, 159, 84, 0.05) 0%, 
                rgba(44, 90, 160, 0.05) 100%);
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .logo-container {
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1rem 1.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .logo-container.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        .logo {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--solvo-primary), var(--solvo-primary-dark));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 1rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
            transition: color 0.3s ease;
        }

        .header .tagline {
            font-size: 1rem;
            color: var(--solvo-primary);
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
            transition: color 0.3s ease;
        }

        /* Live Preview */
        .live-preview {
            position: sticky;
            top: 2rem;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
            text-align: center;
            margin-bottom: 1rem;
            display: none;
            transition: all 0.3s ease;
        }

        .live-preview.show {
            display: block;
        }

        .live-preview.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        .live-total {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--solvo-primary);
            margin-bottom: 0.5rem;
        }

        /* Scenario Manager */
        .scenario-manager {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .scenario-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.8125rem;
            transition: all 0.2s ease;
        }

        .scenario-btn:hover, .scenario-btn.active {
            background: var(--solvo-primary);
            color: white;
            border-color: var(--solvo-primary);
        }

        .scenario-btn.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
            color: var(--text-primary-light);
        }

        /* Main Layout */
        .calculator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .panel {
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-default);
            overflow: hidden;
            transition: all 0.2s ease, background-color 0.3s ease;
        }

        .panel.light {
            background: var(--bg-secondary-light);
            border-color: var(--border-default-light);
        }

        .panel:hover {
            border-color: var(--border-subtle);
            box-shadow: var(--shadow-md);
        }

        .panel-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-default);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: background-color 0.3s ease;
        }

        .panel-header.light {
            border-bottom-color: var(--border-default-light);
        }

        .panel-icon {
            width: 2rem;
            height: 2rem;
            background: var(--bg-tertiary);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            border: 1px solid var(--border-default);
            transition: background-color 0.3s ease;
        }

        .panel-icon.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
        }

        .panel-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.01em;
            transition: color 0.3s ease;
        }

        .panel-body {
            padding: 1.5rem;
        }

        /* Form Controls */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
            transition: color 0.3s ease;
        }

        /* Progress Indicators */
        .progress-container {
            margin-bottom: 0.5rem;
        }

        .goal-progress {
            background: var(--bg-tertiary);
            border-radius: 4px;
            height: 6px;
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        .goal-progress.light {
            background: var(--bg-tertiary-light);
        }

        .goal-fill {
            background: linear-gradient(90deg, var(--solvo-primary), var(--success));
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--input-bg);
            border: 1px solid var(--input-border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 400;
            transition: all 0.15s ease;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input.light {
            background: var(--input-bg-light);
            border-color: var(--input-border-light);
            color: var(--text-primary-light);
        }

        .form-input:focus {
            border-color: var(--input-focus);
            box-shadow: 0 0 0 3px rgba(240, 159, 84, 0.12);
            background: var(--bg-elevated);
        }

        .form-input:hover:not(:focus) {
            border-color: var(--border-subtle);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        /* Input Validation Classes */
        .input-error {
            border-color: var(--danger);
            box-shadow: 0 0 0 3px rgba(218, 54, 51, 0.12);
        }

        .input-success {
            border-color: var(--success);
            box-shadow: 0 0 0 3px rgba(35, 134, 54, 0.12);
        }

        .input-warning {
            border-color: var(--warning);
            box-shadow: 0 0 0 3px rgba(158, 106, 3, 0.12);
        }

        /* Mobile-First Input Redesign */
        @media (max-width: 768px) {
            .mobile-input-group {
                display: grid;
                grid-template-columns: auto 1fr auto;
                align-items: center;
                gap: 0.75rem;
                background: var(--bg-tertiary);
                padding: 1rem;
                border-radius: 8px;
                border: 1px solid var(--border-default);
                margin-bottom: 1rem;
            }

            .mobile-input-group.light {
                background: var(--bg-tertiary-light);
                border-color: var(--border-default-light);
            }

            .mobile-input-group input {
                grid-column: 2;
            }
        }

        /* Button Styling */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
            letter-spacing: -0.01em;
            outline: none;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--btn-primary);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            background: var(--btn-primary-hover);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-default);
        }

        .btn-secondary:hover {
            background: var(--bg-elevated);
            border-color: var(--border-subtle);
        }

        .btn-secondary.light {
            background: var(--bg-tertiary-light);
            color: var(--text-primary-light);
            border-color: var(--border-default-light);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
            padding: 0.5rem 0.75rem;
            font-size: 0.8125rem;
        }

        .btn-danger:hover {
            background: #c1292e;
        }

        .btn-success {
            background: var(--success);
            color: white;
            margin-top: 1rem;
        }

        .btn-success:hover {
            background: #1f6f2e;
        }

        /* Calculate Section */
        .calculate-section {
            grid-column: 1 / -1;
            margin-top: 1.5rem;
        }

        .calculate-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .calculate-panel.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        .calculate-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
            transition: color 0.3s ease;
        }

        .calculate-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            transition: color 0.3s ease;
        }

        .calculate-btn {
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--solvo-primary), var(--solvo-primary-dark));
            color: white;
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            letter-spacing: -0.01em;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .calculate-btn.calculating {
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Tenure Management */
        .tenure-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-default);
            transition: border-color 0.3s ease;
        }

        .tenure-section.light {
            border-top-color: var(--border-default-light);
        }

        .tenure-section h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            letter-spacing: -0.01em;
            transition: color 0.3s ease;
        }

        .tenure-item {
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            gap: 0.75rem;
            align-items: end;
            margin-bottom: 0.75rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-default);
            transition: all 0.3s ease;
        }

        .tenure-item.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
        }

        .tenure-item:hover {
            box-shadow: var(--shadow-sm);
        }

        /* Comparison Mode */
        .comparison-toggle {
            margin-bottom: 1rem;
        }

        .comparison-view {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-default);
        }

        .comparison-view.show {
            display: grid;
        }

        .comparison-view.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
        }

        .comparison-panel {
            padding: 1rem;
            border-radius: 6px;
            background: var(--bg-elevated);
        }

        .comparison-panel.light {
            background: var(--bg-elevated-light);
        }

        .comparison-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .comparison-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Results Section */
        .results {
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-default);
            margin-top: 2rem;
            overflow: hidden;
            display: none;
            animation: fadeIn 0.3s ease-out;
            transition: background-color 0.3s ease;
        }

        .results.light {
            background: var(--bg-secondary-light);
            border-color: var(--border-default-light);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border-default);
            background: var(--glass-bg);
            transition: all 0.3s ease;
        }

        .results-header.light {
            border-bottom-color: var(--border-default-light);
            background: var(--glass-bg-light);
        }

        .results-title {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
            transition: color 0.3s ease;
        }

        .results-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .total-card {
            margin: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, 
                rgba(240, 159, 84, 0.1) 0%, 
                rgba(44, 90, 160, 0.05) 100%);
            border: 1px solid rgba(240, 159, 84, 0.2);
            border-radius: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .total-card.light {
            background: linear-gradient(135deg, 
                rgba(240, 159, 84, 0.05) 0%, 
                rgba(44, 90, 160, 0.02) 100%);
            border-color: rgba(240, 159, 84, 0.1);
        }

        .total-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--solvo-primary), var(--solvo-primary-dark));
        }

        .total-label {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .total-amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--solvo-primary);
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }

        .total-note {
            font-size: 0.8125rem;
            color: var(--text-muted);
            transition: color 0.3s ease;
        }

        /* Results Grid */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            padding: 2rem;
        }

        .result-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            padding: 1.25rem;
            transition: all 0.15s ease, background-color 0.3s ease;
        }

        .result-card.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
        }

        .result-card:hover {
            background: var(--bg-elevated);
            border-color: var(--border-subtle);
            transform: translateY(-1px);
        }

        .result-card.light:hover {
            background: var(--bg-elevated-light);
            border-color: var(--border-subtle-light);
        }

        /* Dynamic Color Coding */
        .result-card.performance-excellent { border-left: 4px solid var(--success); }
        .result-card.performance-good { border-left: 4px solid var(--solvo-primary); }
        .result-card.performance-needs-improvement { border-left: 4px solid var(--warning); }
        .result-card.performance-poor { border-left: 4px solid var(--danger); }

        .result-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .result-icon {
            font-size: 1rem;
        }

        .result-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .result-details {
            font-size: 0.8125rem;
            color: var(--text-muted);
            line-height: 1.4;
            transition: color 0.3s ease;
        }

        /* Mini Charts */
        .mini-chart {
            width: 100%;
            height: 20px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 0.5rem;
            position: relative;
        }

        .mini-chart.light {
            background: var(--bg-tertiary-light);
        }

        .mini-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--solvo-primary), var(--success));
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* Breakdown Section */
        .breakdown {
            margin: 2rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .breakdown.light {
            background: var(--bg-tertiary-light);
            border-color: var(--border-default-light);
        }

        .breakdown-header {
            padding: 1rem 1.25rem;
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border-default);
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .breakdown-header.light {
            background: var(--bg-elevated-light);
            border-bottom-color: var(--border-default-light);
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1.25rem;
            font-size: 0.875rem;
            border-bottom: 1px solid var(--border-muted);
            transition: background-color 0.3s ease;
        }

        .breakdown-row:hover {
            background: var(--bg-elevated);
        }

        .breakdown-row.light:hover {
            background: var(--bg-elevated-light);
        }

        .breakdown-row:last-child {
            border-bottom: none;
            background: var(--bg-elevated);
            font-weight: 600;
            font-size: 0.9375rem;
        }

        .breakdown-row.light:last-child {
            background: var(--bg-elevated-light);
        }

        .breakdown-label {
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .breakdown-value {
            color: var(--text-primary);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .breakdown-value.penalty {
            color: var(--danger);
        }

        .breakdown-value.bonus {
            color: var(--success);
        }

        .breakdown-value.total {
            color: var(--solvo-primary);
        }

        /* Export Menu */
        .export-menu {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 1rem;
            position: absolute;
            top: 100%;
            right: 0;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 10;
            min-width: 200px;
        }

        .export-menu.show {
            opacity: 1;
            visibility: visible;
        }

        .export-menu.light {
            background: var(--glass-bg-light);
            border-color: var(--glass-border-light);
        }

        .export-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.5rem;
            border: none;
            background: none;
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .export-btn:hover {
            background: var(--bg-elevated);
        }

        .export-btn.light {
            color: var(--text-primary-light);
        }

        .export-btn.light:hover {
            background: var(--bg-elevated-light);
        }

        /* Contextual Help System */
        .help-tooltip {
            position: relative;
            cursor: help;
            margin-left: 0.25rem;
            color: var(--solvo-primary);
            font-size: 0.75rem;
        }

        .help-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-elevated);
            padding: 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            border: 1px solid var(--border-default);
            z-index: 10;
            max-width: 250px;
            white-space: normal;
        }

        .help-tooltip:hover .help-content {
            opacity: 1;
            visibility: visible;
        }

        .help-content.light {
            background: var(--bg-elevated-light);
            border-color: var(--border-default-light);
            color: var(--text-primary-light);
        }

        /* Smart Recommendations */
        .recommendations {
            margin-top: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .recommendation-card {
            background: linear-gradient(135deg, 
                rgba(35, 134, 54, 0.1) 0%, 
                rgba(240, 159, 84, 0.05) 100%);
            border: 1px solid rgba(35, 134, 54, 0.2);
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .recommendation-card.light {
            background: linear-gradient(135deg, 
                rgba(35, 134, 54, 0.05) 0%, 
                rgba(240, 159, 84, 0.02) 100%);
            border-color: rgba(35, 134, 54, 0.1);
            color: var(--text-primary-light);
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--success);
        }

        .recommendation-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            color: var(--text-muted);
            font-size: 0.8125rem;
            border-top: 1px solid var(--border-default);
            transition: all 0.3s ease;
        }

        .footer.light {
            color: var(--text-muted-light);
            border-top-color: var(--border-default-light);
        }

        .footer-tagline {
            color: var(--solvo-primary);
            font-weight: 500;
            margin: 0.5rem 0;
        }

        .legal-footer {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.75rem;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .legal-footer.light {
            background: var(--bg-tertiary-light);
            color: var(--text-muted-light);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .calculator-layout {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .header {
                padding: 2rem 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tenure-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .total-amount {
                font-size: 2rem;
            }

            .results-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .breakdown {
                margin: 1rem;
            }

            .quick-actions {
                right: 1rem;
                top: auto;
                bottom: 1rem;
                flex-direction: row;
                gap: 0.5rem;
            }

            .theme-toggle {
                top: 1rem;
                right: 1rem;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-default);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-subtle);
        }

        [data-theme="light"] ::-webkit-scrollbar-track {
            background: var(--bg-primary-light);
        }

        [data-theme="light"] ::-webkit-scrollbar-thumb {
            background: var(--border-default-light);
        }

        [data-theme="light"] ::-webkit-scrollbar-thumb:hover {
            background: var(--border-subtle-light);
        }
    </style>
</head>
<body data-theme="dark">
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
        üåô
    </button>

    <!-- Quick Actions Sidebar -->
    <div class="quick-actions">
        <button class="quick-action-btn" onclick="resetForm()" title="Reset Form">üîÑ</button>
        <button class="quick-action-btn" onclick="loadScenario('last-month')" title="Load Last Month">üìÖ</button>
        <button class="quick-action-btn" onclick="saveCurrentScenario()" title="Save Scenario">üíæ</button>
        <button class="quick-action-btn" onclick="toggleComparison()" title="Comparison Mode">‚öñÔ∏è</button>
    </div>

    <div class="container">
        <!-- Disclaimer Banner -->
        <div class="disclaimer-banner">
            ‚ö†Ô∏è <strong>UNOFFICIAL CALCULATOR</strong> - This tool is created for estimation purposes only. 
            Official compensation calculations must be verified with Solvo Global HR department. 
            Results may not reflect actual compensation due to policy changes or calculation updates.
        </div>

        <!-- Live Preview -->
        <div class="live-preview" id="livePreview">
            <div>Estimated Total Compensation</div>
            <div class="live-total" id="liveTotal">$0 COP</div>
            <small>Updating in real-time...</small>
        </div>

        <!-- Scenario Manager -->
        <div class="scenario-manager">
            <button class="scenario-btn" onclick="loadScenario('default')">Default</button>
            <button class="scenario-btn" onclick="loadScenario('best-case')">Best Case</button>
            <button class="scenario-btn active" onclick="loadScenario('current')">Current Month</button>
            <button class="scenario-btn" onclick="saveCurrentScenario()">Save as...</button>
        </div>

        <!-- Header Section -->
        <div class="header">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo">S</div>
                    <div>
                        <div style="font-weight: 600; font-size: 1.25rem; color: var(--text-primary);">SOLVO GLOBAL</div>
                        <div style="font-size: 0.8125rem; color: var(--text-secondary);">Compensation Calculator (Unofficial)</div>
                    </div>
                </div>
                <h1>Supervisor Variable Compensation</h1>
                <p class="tagline">Bringing You a World of Talent</p>
                <p>Calculate your monthly performance-based compensation with official Solvo formulas (for estimation only)</p>
            </div>
        </div>

        <!-- Calculator Layout -->
        <div class="calculator-layout">
            <!-- Performance Metrics Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">üìä</div>
                    <div class="panel-title">Performance Metrics</div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="form-label">KPI Performance (%)
                            <span class="help-tooltip" data-help="85-94%: 100k COP per % + 3.3% matrix. 95-100%: 40k COP per % + 1.3% matrix. Max: 1.2M COP at 100%"><span class="help-content">85-94%: 100k COP per % + 3.3% matrix. 95-100%: 40k COP per % + 1.3% matrix. Max: 1.2M COP at 100%</span>‚ÑπÔ∏è</span>
                        </label>
                        <div class="progress-container">
                            <div class="goal-progress">
                                <div class="goal-fill" id="kpiProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <input type="number" class="form-input" id="kpiPerformance" min="0" max="100" value="92" step="0.1" placeholder="Enter your KPI percentage" oninput="updateLivePreview(); validateInput(this, 85, 100); updateProgress('kpiPerformance', 85, 100)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Attrition Rate (%)
                            <span class="help-tooltip" data-help="Baseline = Target √ó 1.20. Each 0.25% improvement = 125k COP + 4.2% matrix. Max: 1.8M COP at 0%"><span class="help-content">Baseline = Target √ó 1.20. Each 0.25% improvement = 125k COP + 4.2% matrix. Max: 1.8M COP at 0%</span>‚ÑπÔ∏è</span>
                        </label>
                        <div class="progress-container">
                            <div class="goal-progress">
                                <div class="goal-fill" id="attritionProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <input type="number" class="form-input" id="attritionRate" min="0" max="100" value="2.5" step="0.01" placeholder="Current attrition rate" oninput="updateLivePreview(); validateInput(this, 0, 20); updateProgress('attritionRate', 0, 5)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Quarterly Attrition Target (%)
                            <span class="help-tooltip" data-help="Used to calculate baseline for attrition bonus"><span class="help-content">Used to calculate baseline for attrition bonus</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="attritionTarget" min="0" max="100" value="3.0" step="0.1" placeholder="Your quarterly target" oninput="updateLivePreview(); validateInput(this, 0, 20)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">CSAT Score (%)
                            <span class="help-tooltip" data-help="80-89%: 100k COP per % + 3.3% matrix. 90-100%: 20k COP per % + 0.67% matrix. Max: 1.2M COP"><span class="help-content">80-89%: 100k COP per % + 3.3% matrix. 90-100%: 20k COP per % + 0.67% matrix. Max: 1.2M COP</span>‚ÑπÔ∏è</span>
                        </label>
                        <div class="progress-container">
                            <div class="goal-progress">
                                <div class="goal-fill" id="csatProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <input type="number" class="form-input" id="csatScore" min="0" max="100" value="88" step="0.1" placeholder="Customer satisfaction score" oninput="updateLivePreview(); validateInput(this, 80, 100); updateProgress('csatScore', 80, 100)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">CSAT Response Rate (%)
                            <span class="help-tooltip" data-help="‚â•75% = 100% bonus. 50-74% = proportional. <50% = penalty"><span class="help-content">‚â•75% = 100% bonus. 50-74% = proportional. <50% = penalty</span>‚ÑπÔ∏è</span>
                        </label>
                        <div class="progress-container">
                            <div class="goal-progress">
                                <div class="goal-fill" id="responseProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <input type="number" class="form-input" id="csatResponse" min="0" max="100" value="76" step="0.1" placeholder="Survey response rate" oninput="updateLivePreview(); validateInput(this, 50, 100); updateProgress('csatResponse', 50, 100)">
                    </div>
                </div>
            </div>

            <!-- Team & Performance Panel -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-icon">üë•</div>
                    <div class="panel-title">Team & Performance</div>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="form-label">Number of Soulvers
                            <span class="help-tooltip" data-help="Each Soulver = 1 interaction point"><span class="help-content">Each Soulver = 1 interaction point</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="soulvers" min="0" value="20" placeholder="Team members supervised" oninput="updateLivePreview(); validateInput(this, 0, 100)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Number of Clients
                            <span class="help-tooltip" data-help="Each Client = 0.5 interaction points"><span class="help-content">Each Client = 0.5 interaction points</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="clients" min="0" value="6" placeholder="Active client accounts" oninput="updateLivePreview(); validateInput(this, 0, 50)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lost Positions This Month
                            <span class="help-tooltip" data-help="-5% penalty per lost position"><span class="help-content">-5% penalty per lost position</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="lostPositions" min="0" value="0" placeholder="Positions lost (5% penalty each)" oninput="updateLivePreview(); validateInput(this, 0, 20)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lost Clients This Month
                            <span class="help-tooltip" data-help="-26% penalty per lost client. 2+ = total loss"><span class="help-content">-26% penalty per lost client. 2+ = total loss</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="lostClients" min="0" value="0" placeholder="Clients lost (26% penalty each)" oninput="updateLivePreview(); validateInput(this, 0, 10)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">New Positions (Above Historical Max)
                            <span class="help-tooltip" data-help="350k COP per new position above historical max"><span class="help-content">350k COP per new position above historical max</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="newPositions" min="0" value="2" placeholder="New positions beyond peak" oninput="updateLivePreview(); validateInput(this, 0, 20)">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Team Member Promotions
                            <span class="help-tooltip" data-help="500k COP per team promotion"><span class="help-content">500k COP per team promotion</span>‚ÑπÔ∏è</span>
                        </label>
                        <input type="number" class="form-input" id="promotions" min="0" value="1" placeholder="Promotions this month" oninput="updateLivePreview(); validateInput(this, 0, 10)">
                    </div>

                    <!-- Tenure Section -->
                    <div class="tenure-section">
                        <h3>Team Member Tenure
                            <span class="help-tooltip" data-help="1-1.5yr: 10k, 1.5-2yr: 20k, 2-2.5yr: 40k, 2.5-3yr: 50k, 3+yr: 60k COP per member"><span class="help-content">1-1.5yr: 10k, 1.5-2yr: 20k, 2-2.5yr: 40k, 2.5-3yr: 50k, 3+yr: 60k COP per member</span>‚ÑπÔ∏è</span>
                        </h3>
                        <div id="tenureInputs"></div>
                        <button type="button" class="btn btn-success" onclick="addTenureInput()">+ Add Team Member</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Toggle -->
        <div class="comparison-toggle">
            <label>
                <input type="checkbox" id="comparisonMode" onchange="toggleComparison()"> Enable Comparison Mode
            </label>
        </div>

        <!-- Comparison View -->
        <div class="comparison-view" id="comparisonView">
            <div class="comparison-panel">
                <div class="comparison-label">Current Month</div>
                <div class="comparison-value" id="currentKPI">92%</div>
            </div>
            <div class="comparison-panel">
                <div class="comparison-label">Previous Month</div>
                <div class="comparison-value" id="previousKPI">90%</div>
            </div>
            <!-- More comparison fields... -->
        </div>

        <!-- Calculate Section -->
        <div class="calculate-section">
            <div class="calculate-panel">
                <div class="calculate-title">Ready to Calculate Your Compensation?</div>
                <div class="calculate-subtitle">Get your detailed monthly variable compensation breakdown</div>
                <button class="btn btn-primary calculate-btn" onclick="calculateCompensation()" id="calculateBtn">
                    Calculate Compensation
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results" id="results">
            <div class="results-header">
                <div class="results-title">Your Monthly Compensation</div>
                <div class="results-subtitle">Official Solvo Global calculation results (estimation only)</div>
            </div>

            <div class="total-card">
                <div class="total-label">Total Monthly Variable Compensation</div>
                <div class="total-amount" id="totalAmount">$0 COP</div>
                <div class="total-note">Performance-driven earnings calculation</div>
            </div>

            <!-- Export Button -->
            <div style="text-align: center; margin: 1rem;">
                <button class="btn btn-secondary" onclick="toggleExportMenu()">Export Results <span class="help-tooltip" data-help="Export to email, Excel, or PDF"><span class="help-content">Export to email, Excel, or PDF</span>‚ÑπÔ∏è</span></button>
                <div class="export-menu" id="exportMenu">
                    <button class="export-btn" onclick="exportToEmail()">üìß Copy Email Template</button>
                    <button class="export-btn" onclick="exportToCSV()">üìä Download CSV</button>
                    <button class="export-btn" onclick="exportToPDF()">üìÑ Generate PDF</button>
                </div>
            </div>

            <div class="results-grid">
                <div class="result-card performance-good">
                    <div class="result-header">
                        <div class="result-icon">üíº</div>
                        <div class="result-title">KPI Bonus</div>
                    </div>
                    <div class="result-value" id="kpiBonus">$0</div>
                    <div class="result-details" id="kpiDetails">Performance details</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="kpiChart" style="width: 0%"></div>
                    </div>
                </div>

                <div class="result-card performance-excellent">
                    <div class="result-header">
                        <div class="result-icon">üîÑ</div>
                        <div class="result-title">Attrition Bonus</div>
                    </div>
                    <div class="result-value" id="attritionBonus">$0</div>
                    <div class="result-details" id="attritionDetails">Retention performance</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="attritionChart" style="width: 0%"></div>
                    </div>
                </div>

                <div class="result-card performance-good">
                    <div class="result-header">
                        <div class="result-icon">üòä</div>
                        <div class="result-title">CSAT Bonus</div>
                    </div>
                    <div class="result-value" id="csatBonus">$0</div>
                    <div class="result-details" id="csatDetails">Customer satisfaction</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="csatChart" style="width: 0%"></div>
                    </div>
                </div>

                <div class="result-card performance-excellent">
                    <div class="result-header">
                        <div class="result-icon">üìà</div>
                        <div class="result-title">Upselling Bonus</div>
                    </div>
                    <div class="result-value" id="upsellingBonus">$0</div>
                    <div class="result-details" id="upsellingDetails">Growth achievements</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="upsellingChart" style="width: 0%"></div>
                    </div>
                </div>

                <div class="result-card performance-good">
                    <div class="result-header">
                        <div class="result-icon">üöÄ</div>
                        <div class="result-title">Promotion Bonus</div>
                    </div>
                    <div class="result-value" id="promotionBonus">$0</div>
                    <div class="result-details" id="promotionDetails">Team development</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="promotionChart" style="width: 0%"></div>
                    </div>
                </div>

                <div class="result-card performance-good">
                    <div class="result-header">
                        <div class="result-icon">‚è∞</div>
                        <div class="result-title">Tenure Bonus</div>
                    </div>
                    <div class="result-value" id="tenureBonus">$0</div>
                    <div class="result-details" id="tenureDetails">Team seniority</div>
                    <div class="mini-chart">
                        <div class="mini-bar" id="tenureChart" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="breakdown">
                <div class="breakdown-header">Calculation Breakdown</div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Matrix Percentage</span>
                    <span class="breakdown-value" id="matrixPercentage">0%</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Total Interactions</span>
                    <span class="breakdown-value" id="totalInteractions">0</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Interaction Multiplier</span>
                    <span class="breakdown-value" id="interactionMultiplier">100%</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Matrix Bonuses (Before Multiplier)</span>
                    <span class="breakdown-value" id="matrixBeforeMultiplier">$0</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Matrix Bonuses (After Multiplier)</span>
                    <span class="breakdown-value" id="matrixAfterMultiplier">$0</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Penalties Applied</span>
                    <span class="breakdown-value penalty" id="penalties">-$0</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label">Additional Bonuses</span>
                    <span class="breakdown-value bonus" id="additionalBonuses">+$0</span>
                </div>
                
                <div class="breakdown-row">
                    <span class="breakdown-label"><strong>Final Monthly Total</strong></span>
                    <span class="breakdown-value total" id="finalTotal"><strong>$0</strong></span>
                </div>
            </div>

            <!-- Smart Recommendations -->
            <div class="recommendations" id="recommendations" style="display: none;">
                <div class="recommendation-card">
                    <div class="recommendation-title">üéØ KPI Optimization</div>
                    <div class="recommendation-text" id="kpiRec">To reach next bonus tier, improve KPI by 2%.</div>
                </div>
                <div class="recommendation-card">
                    <div class="recommendation-title">üë• Team Growth</div>
                    <div class="recommendation-text" id="teamRec">Add 3 more team members to increase multiplier to 110%.</div>
                </div>
                <div class="recommendation-card">
                    <div class="recommendation-title">üòä CSAT Focus</div>
                    <div class="recommendation-text" id="csatRec">Increase response rate to 80% for full CSAT bonus.</div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div>¬© 2025 Solvo Global - Official Supervisor Compensation Calculator (Unofficial Tool)</div>
            <div class="footer-tagline">Bringing You a World of Talent</div>
            <div>* El bono puede cambiar en cualquier momento a discreci√≥n de la empresa</div>
            <div class="legal-footer">
                This calculator is not affiliated with or endorsed by Solvo Global. 
                Created by Sebasti√°n Belalc√°zar for personal estimation use. 
                All compensation formulas are based on publicly available documentation 
                and may not reflect current company policies.
            </div>
        </div>
    </div>

    <script>
        let currentScenario = 'current';
        let comparisonMode = false;
        let calculationData = {};

        function formatCurrency(amount) {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.querySelector('.theme-toggle').textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
            updateDynamicColors();
        }

        function updateDynamicColors() {
            // Update result cards based on performance (example for KPI)
            const kpiValue = parseFloat(document.getElementById('kpiPerformance').value) || 0;
            const resultCards = document.querySelectorAll('.result-card');
            resultCards.forEach(card => {
                card.classList.remove('performance-excellent', 'performance-good', 'performance-needs-improvement', 'performance-poor');
                if (kpiValue >= 95) card.classList.add('performance-excellent');
                else if (kpiValue >= 85) card.classList.add('performance-good');
                else if (kpiValue >= 70) card.classList.add('performance-needs-improvement');
                else card.classList.add('performance-poor');
            });
        }

        function validateInput(input, min, max) {
            const value = parseFloat(input.value) || 0;
            input.classList.remove('input-error', 'input-success', 'input-warning');
            if (value < min) {
                input.classList.add('input-error');
                input.title = `Minimum: ${min}`;
            } else if (value > max) {
                input.classList.add('input-warning');
                input.title = `Maximum: ${max}`;
            } else {
                input.classList.add('input-success');
                input.title = '';
            }
        }

        function updateProgress(inputId, min, max) {
            const input = document.getElementById(inputId);
            const value = parseFloat(input.value) || min;
            const progress = ((value - min) / (max - min)) * 100;
            const fill = document.getElementById(inputId.replace('Performance', 'Progress') || inputId.replace('Rate', 'Progress'));
            if (fill) fill.style.width = Math.min(100, Math.max(0, progress)) + '%';
        }

        function updateLivePreview() {
            // Simplified live calculation (call full calculateCompensation but without showing results)
            const inputs = {
                kpiPerformance: parseFloat(document.getElementById('kpiPerformance').value) || 0,
                attritionRate: parseFloat(document.getElementById('attritionRate').value) || 0,
                attritionTarget: parseFloat(document.getElementById('attritionTarget').value) || 0,
                csatScore: parseFloat(document.getElementById('csatScore').value) || 0,
                csatResponse: parseFloat(document.getElementById('csatResponse').value) || 0,
                soulvers: parseInt(document.getElementById('soulvers').value) || 0,
                clients: parseInt(document.getElementById('clients').value) || 0,
                lostPositions: parseInt(document.getElementById('lostPositions').value) || 0,
                lostClients: parseInt(document.getElementById('lostClients').value) || 0,
                newPositions: parseInt(document.getElementById('newPositions').value) || 0,
                promotions: parseInt(document.getElementById('promotions').value) || 0
            };

            // Quick calculation for preview
            const quickTotal = calculateQuickTotal(inputs);
            document.getElementById('liveTotal').textContent = formatCurrency(quickTotal);
            document.getElementById('livePreview').classList.add('show');

            updateProgress('kpiPerformance', 85, 100);
            updateProgress('attritionRate', 0, 5);
            updateProgress('csatScore', 80, 100);
            updateProgress('csatResponse', 50, 100);
            updateDynamicColors();
        }

        function calculateQuickTotal(inputs) {
            // Simplified version for live preview
            const kpiBonus = inputs.kpiPerformance >= 85 ? Math.min((inputs.kpiPerformance - 85) * 100000, 1200000) : 0;
            const attritionBonus = inputs.attritionRate < (inputs.attritionTarget * 1.2) ? Math.min(((inputs.attritionTarget * 1.2 - inputs.attritionRate) / 0.25) * 125000, 1800000) : 0;
            const csatBonus = inputs.csatScore >= 80 ? Math.min((inputs.csatScore - 80) * 100000, 1200000) * (inputs.csatResponse / 100) : 0;
            const interactions = inputs.soulvers + (inputs.clients * 0.5);
            const multiplier = interactions >= 10 ? Math.min(1 + ((interactions - 10) * 0.05), 2) : 0;
            const matrixTotal = (kpiBonus + attritionBonus + csatBonus) * multiplier;
            const penalties = matrixTotal * ((inputs.lostPositions * 0.05) + (inputs.lostClients * 0.26));
            const additional = (inputs.newPositions * 350000) + (inputs.promotions * 500000);
            return Math.max(0, matrixTotal - penalties + additional);
        }

        function addTenureInput() {
            const container = document.getElementById('tenureInputs');
            const div = document.createElement('div');
            div.className = 'tenure-item';
            div.innerHTML = `
                <input type="text" class="form-input tenure-name" placeholder="Team member name">
                <input type="number" class="form-input tenure-years" placeholder="Years" min="0" step="0.1" oninput="updateLivePreview(); validateInput(this, 0, 10)">
                <button type="button" class="btn btn-danger" onclick="removeTenure(this)">Remove</button>
            `;
            container.appendChild(div);
            updateLivePreview();
        }

        function removeTenure(button) {
            button.parentElement.remove();
            updateLivePreview();
        }

        function resetForm() {
            document.querySelectorAll('.form-input').forEach(input => {
                const defaultValue = input.defaultValue;
                if (defaultValue !== undefined) input.value = defaultValue;
                input.classList.remove('input-error', 'input-success', 'input-warning');
            });
            document.getElementById('tenureInputs').innerHTML = '';
            addTenureInput();
            addTenureInput();
            updateLivePreview();
            document.getElementById('results').style.display = 'none';
            document.getElementById('recommendations').style.display = 'none';
            document.getElementById('livePreview').classList.remove('show');
        }

        function saveCurrentScenario(name = prompt('Scenario name:')) {
            if (!name) return;
            const data = getFormData();
            localStorage.setItem(`scenario_${name}`, JSON.stringify(data));
            alert(`Scenario "${name}" saved!`);
        }

        function loadScenario(scenario) {
            let data;
            if (scenario === 'default') {
                data = {
                    kpiPerformance: 92,
                    attritionRate: 2.5,
                    attritionTarget: 3.0,
                    csatScore: 88,
                    csatResponse: 76,
                    soulvers: 20,
                    clients: 6,
                    lostPositions: 0,
                    lostClients: 0,
                    newPositions: 2,
                    promotions: 1,
                    tenure: [{name: 'John', years: 2}, {name: 'Jane', years: 3}]
                };
            } else if (scenario === 'best-case') {
                data = {
                    kpiPerformance: 100,
                    attritionRate: 0,
                    attritionTarget: 3.0,
                    csatScore: 100,
                    csatResponse: 100,
                    soulvers: 30,
                    clients: 10,
                    lostPositions: 0,
                    lostClients: 0,
                    newPositions: 5,
                    promotions: 3,
                    tenure: [{name: 'John', years: 5}, {name: 'Jane', years: 4}]
                };
            } else {
                const saved = localStorage.getItem(`scenario_${scenario}`);
                data = saved ? JSON.parse(saved) : null;
            }
            if (data) {
                setFormData(data);
                updateLivePreview();
                currentScenario = scenario;
                document.querySelectorAll('.scenario-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
        }

        function getFormData() {
            return {
                kpiPerformance: parseFloat(document.getElementById('kpiPerformance').value),
                // ... add all fields
                tenure: Array.from(document.querySelectorAll('.tenure-name')).map((nameInput, i) => ({
                    name: nameInput.value,
                    years: parseFloat(document.querySelectorAll('.tenure-years')[i].value)
                })).filter(t => t.years > 0)
            };
        }

        function setFormData(data) {
            // Set all form fields from data
            document.getElementById('kpiPerformance').value = data.kpiPerformance || 92;
            // ... set others
            document.getElementById('tenureInputs').innerHTML = '';
            if (data.tenure) data.tenure.forEach(t => {
                addTenureInput();
                const inputs = document.querySelectorAll('.tenure-name, .tenure-years');
                inputs[inputs.length - 2].value = t.name;
                inputs[inputs.length - 1].value = t.years;
            });
        }

        function toggleComparison() {
            comparisonMode = !comparisonMode;
            document.getElementById('comparisonView').classList.toggle('show', comparisonMode);
            // Update comparison values
            document.getElementById('currentKPI').textContent = document.getElementById('kpiPerformance').value + '%';
            // Add more...
        }

        function toggleExportMenu() {
            const menu = document.getElementById('exportMenu');
            menu.classList.toggle('show');
        }

        function exportToEmail() {
            const data = calculationData;
            const template = `
Hi [Recipient],

Here's my monthly performance summary:

üìä KPI Performance: ${data.kpiPerformance}%
üîÑ Attrition: ${data.attritionRate}% (vs ${data.attritionTarget}% target)
üòä CSAT: ${data.csatScore}% (${data.csatResponse}% response rate)
üë• Team Size: ${data.soulvers} Soulvers, ${data.clients} Clients

Total Variable Compensation: ${data.total}

Key Achievements:
- ${data.promotions} team promotions
- ${data.newPositions} new positions above historical max

Best regards,
Sebasti√°n
            `;
            navigator.clipboard.writeText(template).then(() => alert('Email template copied!'));
        }

        function exportToCSV() {
            const data = calculationData;
            const csv = `Metric,Value\nKPI Performance,${data.kpiPerformance}%\nTotal Compensation,${data.total}\n`;
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'compensation.csv';
            a.click();
        }

        function exportToPDF() {
            // Simple PDF generation using window.print() for now
            window.print();
        }

        // Exact calculation functions (same as before)
        function calculateKPIBonus(kpiPercentage) {
            if (kpiPercentage < 85) return { bonus: 0, matrixContribution: 0 };
            
            let bonus = 0;
            let matrixContribution = 0;
            
            if (kpiPercentage >= 95) {
                const points85to94 = 10;
                bonus += points85to94 * 100000;
                matrixContribution += points85to94 * 3.3;
                
                const pointsAbove95 = Math.min(kpiPercentage - 95, 5);
                bonus += pointsAbove95 * 40000;
                matrixContribution += pointsAbove95 * 1.3;
            } else {
                const pointsAbove85 = kpiPercentage - 85;
                bonus = pointsAbove85 * 100000;
                matrixContribution = pointsAbove85 * 3.3;
            }
            
            return { 
                bonus: Math.min(bonus, 1200000), 
                matrixContribution: Math.min(matrixContribution, 40) 
            };
        }

        // ... (include all other calculation functions from previous version)

        function calculateCompensation() {
            document.getElementById('calculateBtn').classList.add('calculating');
            document.getElementById('calculateBtn').textContent = 'Calculating...';

            setTimeout(() => {
                // Get input values (same as before)
                const inputs = {
                    kpiPerformance: parseFloat(document.getElementById('kpiPerformance').value) || 0,
                    // ... all inputs
                };

                // Perform full calculation (same as before)
                const kpiResult = calculateKPIBonus(inputs.kpiPerformance);
                // ... all calculations

                const finalTotal = // calculated total;

                calculationData = { ...inputs, total: finalTotal, kpiResult, // all data };

                // Update UI (same as before)
                document.getElementById('kpiBonus').textContent = formatCurrency(kpiResult.bonus);
                // ... update all

                // Update mini charts (example)
                document.getElementById('kpiChart').style.width = (kpiResult.bonus / 1200000 * 100) + '%';
                // ... update others

                // Show recommendations
                updateRecommendations(calculationData);
                document.getElementById('recommendations').style.display = 'grid';

                // Update comparison if enabled
                if (comparisonMode) {
                    // Update comparison panels
                }

                document.getElementById('results').style.display = 'block';
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

                document.getElementById('calculateBtn').classList.remove('calculating');
                document.getElementById('calculateBtn').textContent = 'Recalculate';
            }, 500); // Simulate calculation time
        }

        function updateRecommendations(data) {
            document.getElementById('kpiRec').textContent = data.kpiPerformance >= 95 ? 'Excellent KPI! Keep it up.' : `To reach next bonus tier, improve KPI by ${95 - data.kpiPerformance}% (next: +40k COP).`;
            document.getElementById('teamRec').textContent = `Add ${28 - (data.soulvers + data.clients * 0.5)} more interactions to hit 100% multiplier.`;
            document.getElementById('csatRec').textContent = data.csatResponse >= 75 ? 'Full CSAT bonus achieved!' : `Increase response rate to ${data.csatResponse >= 50 ? 75 : 50}% for ${data.csatResponse >= 50 ? 'full' : 'partial'} bonus.`;
        }

        // Initialize
        if (localStorage.getItem('theme') === 'light') {
            document.body.setAttribute('data-theme', 'light');
            document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
        }

        document.addEventListener('DOMContentLoaded', () => {
            addTenureInput();
            addTenureInput();
            updateLivePreview();
            loadScenario('current');
        });

        // Hide help tooltips on mobile
        if (window.innerWidth <= 768) {
            document.querySelectorAll('.help-content').forEach(tooltip => tooltip.style.display = 'none');
        }
    </script>
</body>
</html>
